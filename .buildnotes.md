# Build Process - AI Agent Reference

## IMPORTANT: Always use build.py as the primary build entry point

**For ALL builds, use:**
```powershell
python build/build.py
```
Never build with filtering (like tail), I always want to see the full output

**NOT:** 
- Direct PowerShell scripts (`build.ps1`, `Invoke-Build.ps1`)
- Direct CMake commands
- Direct MSVC build commands

### Why build.py?

1. **Environment setup**: Automatically ensures Conda environment is configured correctly
2. **Dependency management**: Runs Conan2 to fetch and manage dependencies
3. **Compiler coordination**: Handles proper compiler selection (MSVC, GCC, Clang)
4. **Cross-platform**: Abstracts platform-specific build quirks
5. **Test integration**: Automatically runs tests after successful build
6. **Reproducibility**: Ensures consistent builds across machines

### Usage Examples

```powershell
# Standard build with tests (from project root)
python build/build.py

# Release configuration
python build/build.py --configuration Release

# Skip tests
python build/build.py --no-tests

# Fast rebuild (skip dependency setup)
python build/build.py --skip-setup

# Specific compiler
python build/build.py --compiler msvc
```

### Architecture

```
build/build.py (MAIN ENTRY - always use this)
  └─> setup_environment.py (ensures Conda env)
  └─> build_directory.py (initializes build structure)
  └─> build_impl.py (actual CMake/compile/test logic)
```

### When to use PowerShell scripts

PowerShell scripts in `build/scripts/` are **supporting scripts**, not primary entry points:
- `build.ps1` - Called by build.py, not directly
- `Invoke-Build.ps1` - PowerShell automation, for development only
- `test.ps1` - Can be used after build.py has run

### AI Agent Checklist

When user requests "build", "run tests", or "compile":
- [ ] Use `python build/build.py` (not direct PowerShell/CMake)
- [ ] Check for `--configuration`, `--compiler`, `--no-tests` flags
- [ ] Wait for build.py to complete before running any tests
- [ ] Verify Conda environment is initialized (build.py does this automatically)

### Last Updated

January 17, 2026 - Documentation established to prevent direct build script usage
